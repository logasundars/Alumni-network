{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{Card,CardContent,Typography,Box,IconButton,Avatar,Collapse,CircularProgress}from'@mui/material';import FavoriteIcon from'@mui/icons-material/Favorite';import FavoriteBorderIcon from'@mui/icons-material/FavoriteBorder';import ChatBubbleOutlineIcon from'@mui/icons-material/ChatBubbleOutline';import{motion}from'framer-motion';import CommentList from'./CommentList';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NewsPostCard=_ref=>{let{post,onLike}=_ref;const[expanded,setExpanded]=useState(false);const[liking,setLiking]=useState(false);const[liked,setLiked]=useState(false);// For demo, ideally get from backend\nconst handleLike=async()=>{setLiking(true);try{await axios.post(\"/api/news/\".concat(post.id,\"/like\"),{},{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});setLiked(true);onLike();}catch(_unused){}setLiking(false);};const handleUnlike=async()=>{setLiking(true);try{await axios.post(\"/api/news/\".concat(post.id,\"/unlike\"),{},{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});setLiked(false);onLike();}catch(_unused2){}setLiking(false);};return/*#__PURE__*/_jsx(motion.div,{whileHover:{scale:1.01},children:/*#__PURE__*/_jsx(Card,{sx:{mb:3},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",mb:1,children:[/*#__PURE__*/_jsx(Avatar,{sx:{mr:2},children:post.authorName[0]}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{fontWeight:600,children:post.authorName}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",children:new Date(post.createdAt).toLocaleString()})]})]}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",mb:1,children:post.title}),/*#__PURE__*/_jsx(Typography,{mb:2,children:post.content}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(IconButton,{color:liked?'error':'default',onClick:liked?handleUnlike:handleLike,disabled:liking,children:liking?/*#__PURE__*/_jsx(CircularProgress,{size:20}):liked?/*#__PURE__*/_jsx(FavoriteIcon,{}):/*#__PURE__*/_jsx(FavoriteBorderIcon,{})}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",mr:2,children:[post.likeCount,\" Likes\"]}),/*#__PURE__*/_jsx(IconButton,{onClick:()=>setExpanded(e=>!e),children:/*#__PURE__*/_jsx(ChatBubbleOutlineIcon,{})}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[post.commentCount,\" Comments\"]})]}),/*#__PURE__*/_jsx(Collapse,{in:expanded,timeout:\"auto\",unmountOnExit:true,children:/*#__PURE__*/_jsx(Box,{mt:2,children:/*#__PURE__*/_jsx(CommentList,{postId:post.id,comments:post.comments})})})]})})});};export default NewsPostCard;","map":{"version":3,"names":["React","useState","axios","Card","CardContent","Typography","Box","IconButton","Avatar","Collapse","CircularProgress","FavoriteIcon","FavoriteBorderIcon","ChatBubbleOutlineIcon","motion","CommentList","jsx","_jsx","jsxs","_jsxs","NewsPostCard","_ref","post","onLike","expanded","setExpanded","liking","setLiking","liked","setLiked","handleLike","concat","id","headers","Authorization","localStorage","getItem","_unused","handleUnlike","_unused2","div","whileHover","scale","children","sx","mb","display","alignItems","mr","authorName","fontWeight","variant","color","Date","createdAt","toLocaleString","title","content","onClick","disabled","size","likeCount","e","commentCount","in","timeout","unmountOnExit","mt","postId","comments"],"sources":["E:/Alumini- network/frontend/src/components/NewsPostCard.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { Card, CardContent, Typography, Box, IconButton, Avatar, Collapse, CircularProgress } from '@mui/material';\r\nimport FavoriteIcon from '@mui/icons-material/Favorite';\r\nimport FavoriteBorderIcon from '@mui/icons-material/FavoriteBorder';\r\nimport ChatBubbleOutlineIcon from '@mui/icons-material/ChatBubbleOutline';\r\nimport { motion } from 'framer-motion';\r\nimport CommentList from './CommentList';\r\n\r\ninterface NewsPost {\r\n  id: number;\r\n  title: string;\r\n  content: string;\r\n  summary: string;\r\n  imageUrl: string;\r\n  authorName: string;\r\n  createdAt: string;\r\n  likeCount: number;\r\n  commentCount: number;\r\n  comments: any[];\r\n}\r\n\r\ninterface NewsPostCardProps {\r\n  post: NewsPost;\r\n  onLike: () => void;\r\n}\r\n\r\nconst NewsPostCard: React.FC<NewsPostCardProps> = ({ post, onLike }) => {\r\n  const [expanded, setExpanded] = useState(false);\r\n  const [liking, setLiking] = useState(false);\r\n  const [liked, setLiked] = useState(false); // For demo, ideally get from backend\r\n\r\n  const handleLike = async () => {\r\n    setLiking(true);\r\n    try {\r\n      await axios.post(`/api/news/${post.id}/like`, {}, { headers: { Authorization: `Bearer ${localStorage.getItem('token')}` } });\r\n      setLiked(true);\r\n      onLike();\r\n    } catch {}\r\n    setLiking(false);\r\n  };\r\n\r\n  const handleUnlike = async () => {\r\n    setLiking(true);\r\n    try {\r\n      await axios.post(`/api/news/${post.id}/unlike`, {}, { headers: { Authorization: `Bearer ${localStorage.getItem('token')}` } });\r\n      setLiked(false);\r\n      onLike();\r\n    } catch {}\r\n    setLiking(false);\r\n  };\r\n\r\n  return (\r\n    <motion.div whileHover={{ scale: 1.01 }}>\r\n      <Card sx={{ mb: 3 }}>\r\n        <CardContent>\r\n          <Box display=\"flex\" alignItems=\"center\" mb={1}>\r\n            <Avatar sx={{ mr: 2 }}>{post.authorName[0]}</Avatar>\r\n            <Box>\r\n              <Typography fontWeight={600}>{post.authorName}</Typography>\r\n              <Typography variant=\"caption\" color=\"text.secondary\">{new Date(post.createdAt).toLocaleString()}</Typography>\r\n            </Box>\r\n          </Box>\r\n          <Typography variant=\"h6\" mb={1}>{post.title}</Typography>\r\n          <Typography mb={2}>{post.content}</Typography>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <IconButton color={liked ? 'error' : 'default'} onClick={liked ? handleUnlike : handleLike} disabled={liking}>\r\n              {liking ? <CircularProgress size={20} /> : liked ? <FavoriteIcon /> : <FavoriteBorderIcon />}\r\n            </IconButton>\r\n            <Typography variant=\"body2\" mr={2}>{post.likeCount} Likes</Typography>\r\n            <IconButton onClick={() => setExpanded(e => !e)}>\r\n              <ChatBubbleOutlineIcon />\r\n            </IconButton>\r\n            <Typography variant=\"body2\">{post.commentCount} Comments</Typography>\r\n          </Box>\r\n          <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\r\n            <Box mt={2}>\r\n              <CommentList postId={post.id} comments={post.comments} />\r\n            </Box>\r\n          </Collapse>\r\n        </CardContent>\r\n      </Card>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default NewsPostCard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}