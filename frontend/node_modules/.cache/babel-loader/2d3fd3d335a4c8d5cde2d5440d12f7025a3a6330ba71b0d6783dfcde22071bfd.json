{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{Box,Typography,Avatar,TextField,Button,CircularProgress,List,ListItem,ListItemAvatar,ListItemText}from'@mui/material';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CommentList=_ref=>{let{postId,comments}=_ref;const[comment,setComment]=useState('');const[submitting,setSubmitting]=useState(false);const[localComments,setLocalComments]=useState(comments||[]);const handleSubmit=async e=>{e.preventDefault();setSubmitting(true);try{const res=await axios.post(\"/api/news/\".concat(postId,\"/comment\"),{content:comment},{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});setLocalComments([...localComments,res.data]);setComment('');}catch(_unused){}setSubmitting(false);};return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{marginBottom:16},children:[/*#__PURE__*/_jsx(TextField,{label:\"Add a comment\",value:comment,onChange:e=>setComment(e.target.value),fullWidth:true,required:true,sx:{mb:1}}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:submitting||!comment,children:submitting?/*#__PURE__*/_jsx(CircularProgress,{size:20}):'Comment'})]}),/*#__PURE__*/_jsx(List,{children:localComments.map(c=>/*#__PURE__*/_jsxs(ListItem,{alignItems:\"flex-start\",children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{children:c.authorName[0]})}),/*#__PURE__*/_jsx(ListItemText,{primary:/*#__PURE__*/_jsx(Typography,{fontWeight:600,children:c.authorName}),secondary:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:new Date(c.createdAt).toLocaleString()}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:c.content})]})})]},c.id))})]});};export default CommentList;","map":{"version":3,"names":["React","useState","axios","Box","Typography","Avatar","TextField","Button","CircularProgress","List","ListItem","ListItemAvatar","ListItemText","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CommentList","_ref","postId","comments","comment","setComment","submitting","setSubmitting","localComments","setLocalComments","handleSubmit","e","preventDefault","res","post","concat","content","headers","Authorization","localStorage","getItem","data","_unused","children","onSubmit","style","marginBottom","label","value","onChange","target","fullWidth","required","sx","mb","type","variant","disabled","size","map","c","alignItems","authorName","primary","fontWeight","secondary","color","Date","createdAt","toLocaleString","id"],"sources":["E:/Alumini- network/frontend/src/components/CommentList.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { Box, Typography, Avatar, TextField, Button, CircularProgress, List, ListItem, ListItemAvatar, ListItemText } from '@mui/material';\r\n\r\ninterface Comment {\r\n  id: number;\r\n  content: string;\r\n  authorName: string;\r\n  createdAt: string;\r\n}\r\n\r\ninterface CommentListProps {\r\n  postId: number;\r\n  comments: Comment[];\r\n}\r\n\r\nconst CommentList: React.FC<CommentListProps> = ({ postId, comments }) => {\r\n  const [comment, setComment] = useState('');\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [localComments, setLocalComments] = useState<Comment[]>(comments || []);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setSubmitting(true);\r\n    try {\r\n      const res = await axios.post(`/api/news/${postId}/comment`, { content: comment }, { headers: { Authorization: `Bearer ${localStorage.getItem('token')}` } });\r\n      setLocalComments([...localComments, res.data]);\r\n      setComment('');\r\n    } catch {}\r\n    setSubmitting(false);\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <form onSubmit={handleSubmit} style={{ marginBottom: 16 }}>\r\n        <TextField\r\n          label=\"Add a comment\"\r\n          value={comment}\r\n          onChange={e => setComment(e.target.value)}\r\n          fullWidth\r\n          required\r\n          sx={{ mb: 1 }}\r\n        />\r\n        <Button type=\"submit\" variant=\"contained\" disabled={submitting || !comment}>\r\n          {submitting ? <CircularProgress size={20} /> : 'Comment'}\r\n        </Button>\r\n      </form>\r\n      <List>\r\n        {localComments.map(c => (\r\n          <ListItem alignItems=\"flex-start\" key={c.id}>\r\n            <ListItemAvatar>\r\n              <Avatar>{c.authorName[0]}</Avatar>\r\n            </ListItemAvatar>\r\n            <ListItemText\r\n              primary={<Typography fontWeight={600}>{c.authorName}</Typography>}\r\n              secondary={<>\r\n                <Typography variant=\"body2\" color=\"text.secondary\">{new Date(c.createdAt).toLocaleString()}</Typography>\r\n                <Typography variant=\"body1\">{c.content}</Typography>\r\n              </>}\r\n            />\r\n          </ListItem>\r\n        ))}\r\n      </List>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default CommentList; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}