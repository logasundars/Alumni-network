{"ast":null,"code":"import _objectSpread from\"E:/Alumini- network/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import axios from'axios';import{Container,Typography,Box,Button,TextField,Card,CardContent,CircularProgress,Snackbar,Alert}from'@mui/material';import{motion}from'framer-motion';import NewsPostCard from'./NewsPostCard';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NewsFeed=()=>{const[posts,setPosts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[openSnackbar,setOpenSnackbar]=useState(false);const[newPost,setNewPost]=useState({title:'',content:''});const[posting,setPosting]=useState(false);useEffect(()=>{fetchPosts();},[]);const fetchPosts=async()=>{setLoading(true);try{const res=await axios.get('/api/news',{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});setPosts(res.data);}catch(err){setError('Failed to load news feed.');}setLoading(false);};const handlePost=async e=>{e.preventDefault();setPosting(true);try{await axios.post('/api/news',newPost,{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});setNewPost({title:'',content:''});setOpenSnackbar(true);fetchPosts();}catch(err){setError('Failed to post news.');}setPosting(false);};return/*#__PURE__*/_jsxs(Container,{maxWidth:\"md\",sx:{mt:4},children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",mb:2,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",fontWeight:700,children:\"News Feed\"}),/*#__PURE__*/_jsx(Button,{component:Link,to:\"/news/external\",variant:\"outlined\",children:\"External News\"})]}),/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:/*#__PURE__*/_jsx(Card,{sx:{mb:3},children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handlePost,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",mb:1,children:\"Share something with the network\"}),/*#__PURE__*/_jsx(TextField,{label:\"Title\",value:newPost.title,onChange:e=>setNewPost(_objectSpread(_objectSpread({},newPost),{},{title:e.target.value})),fullWidth:true,required:true,sx:{mb:2}}),/*#__PURE__*/_jsx(TextField,{label:\"Content\",value:newPost.content,onChange:e=>setNewPost(_objectSpread(_objectSpread({},newPost),{},{content:e.target.value})),fullWidth:true,multiline:true,minRows:3,required:true,sx:{mb:2}}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:posting,children:posting?/*#__PURE__*/_jsx(CircularProgress,{size:24}):'Post'})]})})})}),loading?/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",mt:4,children:/*#__PURE__*/_jsx(CircularProgress,{})}):error?/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:error}):posts.map(post=>/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.1*post.id},children:/*#__PURE__*/_jsx(NewsPostCard,{post:post,onLike:fetchPosts})},post.id)),/*#__PURE__*/_jsx(Snackbar,{open:openSnackbar,autoHideDuration:3000,onClose:()=>setOpenSnackbar(false),children:/*#__PURE__*/_jsx(Alert,{onClose:()=>setOpenSnackbar(false),severity:\"success\",sx:{width:'100%'},children:\"News posted successfully!\"})})]});};export default NewsFeed;","map":{"version":3,"names":["React","useEffect","useState","axios","Container","Typography","Box","Button","TextField","Card","CardContent","CircularProgress","Snackbar","Alert","motion","NewsPostCard","Link","jsx","_jsx","jsxs","_jsxs","NewsFeed","posts","setPosts","loading","setLoading","error","setError","openSnackbar","setOpenSnackbar","newPost","setNewPost","title","content","posting","setPosting","fetchPosts","res","get","headers","Authorization","concat","localStorage","getItem","data","err","handlePost","e","preventDefault","post","maxWidth","sx","mt","children","display","justifyContent","alignItems","mb","variant","fontWeight","component","to","div","initial","opacity","y","animate","onSubmit","label","value","onChange","_objectSpread","target","fullWidth","required","multiline","minRows","type","disabled","size","severity","map","transition","delay","id","onLike","open","autoHideDuration","onClose","width"],"sources":["E:/Alumini- network/frontend/src/components/NewsFeed.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { Container, Typography, Box, Button, TextField, Card, CardContent, Avatar, CircularProgress, Snackbar, Alert } from '@mui/material';\r\nimport { motion } from 'framer-motion';\r\nimport NewsPostCard from './NewsPostCard';\r\nimport { Link } from 'react-router-dom';\r\n\r\ninterface NewsPost {\r\n  id: number;\r\n  title: string;\r\n  content: string;\r\n  summary: string;\r\n  imageUrl: string;\r\n  authorName: string;\r\n  createdAt: string;\r\n  likeCount: number;\r\n  commentCount: number;\r\n  comments: any[];\r\n}\r\n\r\nconst NewsFeed: React.FC = () => {\r\n  const [posts, setPosts] = useState<NewsPost[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [openSnackbar, setOpenSnackbar] = useState(false);\r\n  const [newPost, setNewPost] = useState({ title: '', content: '' });\r\n  const [posting, setPosting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchPosts();\r\n  }, []);\r\n\r\n  const fetchPosts = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const res = await axios.get('/api/news', { headers: { Authorization: `Bearer ${localStorage.getItem('token')}` } });\r\n      setPosts(res.data);\r\n    } catch (err) {\r\n      setError('Failed to load news feed.');\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const handlePost = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setPosting(true);\r\n    try {\r\n      await axios.post('/api/news', newPost, { headers: { Authorization: `Bearer ${localStorage.getItem('token')}` } });\r\n      setNewPost({ title: '', content: '' });\r\n      setOpenSnackbar(true);\r\n      fetchPosts();\r\n    } catch (err) {\r\n      setError('Failed to post news.');\r\n    }\r\n    setPosting(false);\r\n  };\r\n\r\n  return (\r\n    <Container maxWidth=\"md\" sx={{ mt: 4 }}>\r\n      <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={2}>\r\n        <Typography variant=\"h4\" fontWeight={700}>News Feed</Typography>\r\n        <Button component={Link} to=\"/news/external\" variant=\"outlined\">External News</Button>\r\n      </Box>\r\n      <motion.div initial={{ opacity: 0, y: -20 }} animate={{ opacity: 1, y: 0 }}>\r\n        <Card sx={{ mb: 3 }}>\r\n          <CardContent>\r\n            <form onSubmit={handlePost}>\r\n              <Typography variant=\"h6\" mb={1}>Share something with the network</Typography>\r\n              <TextField\r\n                label=\"Title\"\r\n                value={newPost.title}\r\n                onChange={e => setNewPost({ ...newPost, title: e.target.value })}\r\n                fullWidth\r\n                required\r\n                sx={{ mb: 2 }}\r\n              />\r\n              <TextField\r\n                label=\"Content\"\r\n                value={newPost.content}\r\n                onChange={e => setNewPost({ ...newPost, content: e.target.value })}\r\n                fullWidth\r\n                multiline\r\n                minRows={3}\r\n                required\r\n                sx={{ mb: 2 }}\r\n              />\r\n              <Button type=\"submit\" variant=\"contained\" disabled={posting}>\r\n                {posting ? <CircularProgress size={24} /> : 'Post'}\r\n              </Button>\r\n            </form>\r\n          </CardContent>\r\n        </Card>\r\n      </motion.div>\r\n      {loading ? (\r\n        <Box display=\"flex\" justifyContent=\"center\" mt={4}><CircularProgress /></Box>\r\n      ) : error ? (\r\n        <Alert severity=\"error\">{error}</Alert>\r\n      ) : (\r\n        posts.map(post => (\r\n          <motion.div key={post.id} initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 * post.id }}>\r\n            <NewsPostCard post={post} onLike={fetchPosts} />\r\n          </motion.div>\r\n        ))\r\n      )}\r\n      <Snackbar open={openSnackbar} autoHideDuration={3000} onClose={() => setOpenSnackbar(false)}>\r\n        <Alert onClose={() => setOpenSnackbar(false)} severity=\"success\" sx={{ width: '100%' }}>\r\n          News posted successfully!\r\n        </Alert>\r\n      </Snackbar>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default NewsFeed; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}