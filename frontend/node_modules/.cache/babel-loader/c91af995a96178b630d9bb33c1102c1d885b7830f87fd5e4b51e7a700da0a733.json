{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Card,Spinner}from'react-bootstrap';import Login from'./components/Login';import Register from'./components/Register';import Dashboard from'./components/Dashboard';import{BrowserRouter as Router,Routes,Route}from'react-router-dom';import NewsFeed from'./components/NewsFeed';import ExternalNews from'./components/ExternalNews';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[apiMessage,setApiMessage]=useState('Loading...');const[isAuthenticated,setIsAuthenticated]=useState(false);const[user,setUser]=useState(null);const[showRegister,setShowRegister]=useState(false);useEffect(()=>{fetch('/api').then(res=>res.ok?res.text():Promise.reject('API not reachable')).then(text=>setApiMessage(text)).catch(()=>setApiMessage('Could not connect to backend.'));},[]);const handleLogin=(token,userData)=>{localStorage.setItem('token',token);localStorage.setItem('userEmail',userData.email);setUser(userData);setIsAuthenticated(true);};const handleRegister=(token,userData)=>{localStorage.setItem('token',token);localStorage.setItem('userEmail',userData.email);setUser(userData);setIsAuthenticated(true);};const handleLogout=()=>{localStorage.removeItem('token');setUser(null);setIsAuthenticated(false);};// If backend is not connected, show the original status card\nif(apiMessage!=='Hello from backend!'){return/*#__PURE__*/_jsx(Container,{className:\"d-flex vh-100 align-items-center justify-content-center\",children:/*#__PURE__*/_jsx(Card,{style:{minWidth:400},className:\"shadow\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{className:\"mb-4 text-primary text-center\",as:\"h1\",children:\"Alumni Network Platform\"}),/*#__PURE__*/_jsx(Card.Subtitle,{className:\"mb-2 text-muted text-center\",children:\"Backend status:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:apiMessage==='Loading...'?/*#__PURE__*/_jsx(Spinner,{animation:\"border\"}):/*#__PURE__*/_jsx(\"span\",{children:apiMessage})})]})})});}return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/news\",element:/*#__PURE__*/_jsx(NewsFeed,{})}),/*#__PURE__*/_jsx(Route,{path:\"/news/external\",element:/*#__PURE__*/_jsx(ExternalNews,{})}),/*#__PURE__*/_jsx(Route,{path:\"/*\",element:isAuthenticated&&user?/*#__PURE__*/_jsx(Dashboard,{user:user,onLogout:handleLogout}):showRegister?/*#__PURE__*/_jsx(Register,{onRegister:handleRegister,onSwitchToLogin:()=>setShowRegister(false)}):/*#__PURE__*/_jsx(Login,{onLogin:handleLogin,onSwitchToRegister:()=>setShowRegister(true)})})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Container","Card","Spinner","Login","Register","Dashboard","BrowserRouter","Router","Routes","Route","NewsFeed","ExternalNews","jsx","_jsx","jsxs","_jsxs","App","apiMessage","setApiMessage","isAuthenticated","setIsAuthenticated","user","setUser","showRegister","setShowRegister","fetch","then","res","ok","text","Promise","reject","catch","handleLogin","token","userData","localStorage","setItem","email","handleRegister","handleLogout","removeItem","className","children","style","minWidth","Body","Title","as","Subtitle","animation","path","element","onLogout","onRegister","onSwitchToLogin","onLogin","onSwitchToRegister"],"sources":["E:/Alumini- network/frontend/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container, Card, Spinner, Button } from 'react-bootstrap';\nimport Login from './components/Login';\nimport Register from './components/Register';\nimport Dashboard from './components/Dashboard';\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport NewsFeed from './components/NewsFeed';\nimport ExternalNews from './components/ExternalNews';\n\ninterface User {\n  email: string;\n  firstName: string;\n  lastName: string;\n  role: string;\n}\n\nfunction App() {\n  const [apiMessage, setApiMessage] = useState<string>('Loading...');\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [user, setUser] = useState<User | null>(null);\n  const [showRegister, setShowRegister] = useState(false);\n\n  useEffect(() => {\n    fetch('/api')\n      .then(res => res.ok ? res.text() : Promise.reject('API not reachable'))\n      .then(text => setApiMessage(text))\n      .catch(() => setApiMessage('Could not connect to backend.'));\n  }, []);\n\n  const handleLogin = (token: string, userData: User) => {\n    localStorage.setItem('token', token);\n    localStorage.setItem('userEmail', userData.email);\n    setUser(userData);\n    setIsAuthenticated(true);\n  };\n\n  const handleRegister = (token: string, userData: User) => {\n    localStorage.setItem('token', token);\n    localStorage.setItem('userEmail', userData.email);\n    setUser(userData);\n    setIsAuthenticated(true);\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    setUser(null);\n    setIsAuthenticated(false);\n  };\n\n  // If backend is not connected, show the original status card\n  if (apiMessage !== 'Hello from backend!') {\n    return (\n      <Container className=\"d-flex vh-100 align-items-center justify-content-center\">\n        <Card style={{ minWidth: 400 }} className=\"shadow\">\n          <Card.Body>\n            <Card.Title className=\"mb-4 text-primary text-center\" as=\"h1\">Alumni Network Platform</Card.Title>\n            <Card.Subtitle className=\"mb-2 text-muted text-center\">Backend status:</Card.Subtitle>\n            <div className=\"text-center\">\n              {apiMessage === 'Loading...' ? <Spinner animation=\"border\" /> : <span>{apiMessage}</span>}\n            </div>\n          </Card.Body>\n        </Card>\n      </Container>\n    );\n  }\n\n  return (\n    <Router>\n      <Routes>\n        <Route path=\"/news\" element={<NewsFeed />} />\n        <Route path=\"/news/external\" element={<ExternalNews />} />\n        <Route path=\"/*\" element={isAuthenticated && user ? <Dashboard user={user} onLogout={handleLogout} /> : (\n          showRegister ? <Register onRegister={handleRegister} onSwitchToLogin={() => setShowRegister(false)} /> : <Login onLogin={handleLogin} onSwitchToRegister={() => setShowRegister(true)} />\n        )} />\n      </Routes>\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}